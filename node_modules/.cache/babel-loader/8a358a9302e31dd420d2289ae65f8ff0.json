{"ast":null,"code":"import _regeneratorRuntime from\"C:/mountain_friends_web/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/mountain_friends_web/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/mountain_friends_web/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Card from\"../UI/Card/Card\";import FriendCard from\"./FriendCard\";import Modal from\"../UI/Modal/Modal\";import Button from\"../UI/Button/Button\";import classes from\"./MyFriendsInfo.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyFriendsInfo=function MyFriendsInfo(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allMyFriends=_useState2[0],setAllMyFriends=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),friendAdded=_useState4[0],setFriendAdded=_useState4[1];useEffect(function(){var fetchAllFriendsId=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var reqOptions,response,body;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:reqOptions={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:localStorage.getItem(\"isLoggedIn\")})};_context.prev=1;_context.next=4;return fetch(\"http://sabrinamueller.eu-4.evennode.com/getallmyfriendsid\",reqOptions);case 4:response=_context.sent;if(response.ok){_context.next=7;break;}throw new Error(\"Something went wrong\");case 7:_context.next=9;return response.json();case 9:body=_context.sent;setAllMyFriends(body);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);console.log(_context.t0.message);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function fetchAllFriendsId(){return _ref.apply(this,arguments);};}();fetchAllFriendsId();},[friendAdded]);var deleteFriend=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(friendsId){var reqOptions,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:reqOptions={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:localStorage.getItem(\"isLoggedIn\"),friendsId:friendsId})};_context2.prev=1;_context2.next=4;return fetch(\"http://sabrinamueller.eu-4.evennode.com/deleteafriend\",reqOptions);case 4:response=_context2.sent;if(response.ok){_context2.next=8;break;}console.log(response);throw new Error(\"Something went wrong\");case 8:// const body = await response.json();\n// setAllFriends(body);\nsetFriendAdded(true);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0.message);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function deleteFriend(_x){return _ref2.apply(this,arguments);};}();var confirmFriendAddedHandler=function confirmFriendAddedHandler(){setFriendAdded(false);};var allFriendsCard=allMyFriends.map(function(friend){return/*#__PURE__*/_jsx(FriendCard,{id:friend.id,name:friend.name,email:friend.email,birthday:friend.birthday,city:friend.city,button:\"Delete friend\",isFriend:0,addFriend:deleteFriend},friend.id);});return/*#__PURE__*/_jsxs(Card,{className:classes.friendsinfo,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My friends\"}),/*#__PURE__*/_jsx(\"ul\",{className:classes.friendlist,children:allFriendsCard}),friendAdded&&/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.modal,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Friend deleted!\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:confirmFriendAddedHandler,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",className:classes.modalBtn,children:\"Okay\"})})]})})]});};export default MyFriendsInfo;","map":{"version":3,"names":["React","useState","useEffect","Card","FriendCard","Modal","Button","classes","MyFriendsInfo","allMyFriends","setAllMyFriends","friendAdded","setFriendAdded","fetchAllFriendsId","reqOptions","method","headers","body","JSON","stringify","id","localStorage","getItem","fetch","response","ok","Error","json","console","log","message","deleteFriend","friendsId","confirmFriendAddedHandler","allFriendsCard","map","friend","name","email","birthday","city","friendsinfo","friendlist","modal","modalBtn"],"sources":["C:/mountain_friends_web/frontend/src/components/Home/MyFriendsInfo.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nimport Card from \"../UI/Card/Card\";\r\nimport FriendCard from \"./FriendCard\";\r\nimport Modal from \"../UI/Modal/Modal\";\r\nimport Button from \"../UI/Button/Button\";\r\nimport classes from \"./MyFriendsInfo.module.css\";\r\n\r\nconst MyFriendsInfo = () => {\r\n  const [allMyFriends, setAllMyFriends] = useState([]);\r\n  const [friendAdded, setFriendAdded] = useState(false);\r\n  useEffect(() => {\r\n    const fetchAllFriendsId = async () => {\r\n      const reqOptions = {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          id: localStorage.getItem(\"isLoggedIn\"),\r\n        }),\r\n      };\r\n      try {\r\n        const response = await fetch(\r\n          \"http://sabrinamueller.eu-4.evennode.com/getallmyfriendsid\",\r\n          reqOptions\r\n        );\r\n        if (!response.ok) {\r\n          throw new Error(\"Something went wrong\");\r\n        }\r\n        const body = await response.json();\r\n        setAllMyFriends(body);\r\n      } catch (error) {\r\n        console.log(error.message);\r\n      }\r\n    };\r\n    fetchAllFriendsId();\r\n  }, [friendAdded]);\r\n\r\n  const deleteFriend = async (friendsId) => {\r\n    const reqOptions = {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        id: localStorage.getItem(\"isLoggedIn\"),\r\n        friendsId: friendsId,\r\n      }),\r\n    };\r\n    try {\r\n      const response = await fetch(\r\n        \"http://sabrinamueller.eu-4.evennode.com/deleteafriend\",\r\n        reqOptions\r\n      );\r\n      if (!response.ok) {\r\n        console.log(response);\r\n        throw new Error(\"Something went wrong\");\r\n      }\r\n      // const body = await response.json();\r\n      // setAllFriends(body);\r\n      setFriendAdded(true);\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  };\r\n\r\n  const confirmFriendAddedHandler = () => {\r\n    setFriendAdded(false);\r\n  };\r\n\r\n  const allFriendsCard = allMyFriends.map((friend) => (\r\n    <FriendCard\r\n      key={friend.id}\r\n      id={friend.id}\r\n      name={friend.name}\r\n      email={friend.email}\r\n      birthday={friend.birthday}\r\n      city={friend.city}\r\n      button={\"Delete friend\"}\r\n      isFriend={0}\r\n      addFriend={deleteFriend}\r\n    />\r\n  ));\r\n\r\n  return (\r\n    <Card className={classes.friendsinfo}>\r\n      <h1>My friends</h1>\r\n      <ul className={classes.friendlist}>{allFriendsCard}</ul>\r\n      {friendAdded && (\r\n        <Modal>\r\n          <div className={classes.modal}>\r\n            <h1>Friend deleted!</h1>\r\n            <form onSubmit={confirmFriendAddedHandler}>\r\n              <Button type=\"submit\" className={classes.modalBtn}>\r\n                Okay\r\n              </Button>\r\n            </form>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default MyFriendsInfo;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}