{"ast":null,"code":"import _regeneratorRuntime from\"C:/mountain_friends_web/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/mountain_friends_web/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/mountain_friends_web/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Card from\"../UI/Card/Card\";import Button from\"../UI/Button/Button\";import Modal from\"../UI/Modal/Modal\";import classes from\"./MountainDetails.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MountainDetails=function MountainDetails(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),addHike=_useState2[0],setAddHike=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),changedDate=_useState4[0],setChangedDate=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),enteredDate=_useState6[0],setEnteredDate=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),allPeopleOnTheMountain=_useState8[0],setAllPeopleOnTheMountain=_useState8[1];var goBack=function goBack(){props.onBack();};var addHikeHandler=function addHikeHandler(){setAddHike(true);};var noAdding=function noAdding(){setEnteredDate(\"\");setChangedDate(false);setAddHike(false);};var changeDateHandler=function changeDateHandler(event){setChangedDate(true);setEnteredDate(event.target.value);};var writeHikeHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var date,reqOptions,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:date=enteredDate.toString();// console.log(date);\nreqOptions={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:localStorage.getItem(\"isLoggedIn\"),mountain:props.id,date:date})};_context.prev=2;_context.next=5;return fetch(\"http://sabrinamueller.eu-4.evennode.com/addhike\",reqOptions);case 5:response=_context.sent;if(response.ok){_context.next=9;break;}console.log(response);throw new Error(\"Something went wrong\");case 9:setAddHike(false);setChangedDate(false);setEnteredDate(\"\");_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);console.log(_context.t0.message);case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function writeHikeHandler(){return _ref.apply(this,arguments);};}();useEffect(function(){var getAllHikers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var reqOptions,response,body;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:reqOptions={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:localStorage.getItem(\"isLoggedIn\"),mountain:props.id})};_context2.prev=1;_context2.next=4;return fetch(\"http://sabrinamueller.eu-4.evennode.com/getallhikers\",reqOptions);case 4:response=_context2.sent;if(response.ok){_context2.next=8;break;}console.log(response);throw new Error(\"Something went wrong\");case 8:_context2.next=10;return response.json();case 10:body=_context2.sent;console.log(body);setAllPeopleOnTheMountain(body);_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0.message);case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[1,15]]);}));return function getAllHikers(){return _ref2.apply(this,arguments);};}();getAllHikers();},[props.id]);var peopleOnTheMountainLi=allPeopleOnTheMountain.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:item},item);});return/*#__PURE__*/_jsxs(Card,{className:classes.details,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Mountain details for \",props.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Altitude: \",props.altitude,\" m\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Height difference: \",props.difference,\" m\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Longitude: \",props.longitude,\" km\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Duration: \",props.duration,\" hours\"]}),allPeopleOnTheMountain.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:classes.peoplediv,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"People who have been on this mountain\"}),/*#__PURE__*/_jsx(\"ul\",{children:peopleOnTheMountainLi})]}),/*#__PURE__*/_jsx(Button,{className:classes.detailsbutton1,onClick:goBack,children:\"Back\"}),/*#__PURE__*/_jsx(Button,{className:classes.detailsbutton2,onClick:addHikeHandler,children:\"Add tour to my list\"})]}),addHike&&/*#__PURE__*/_jsxs(Modal,{className:classes.mymodal,children:[/*#__PURE__*/_jsxs(\"h1\",{className:classes.myh1,children:[\"Do want to add \",props.name,\" to your hike list?\"]}),/*#__PURE__*/_jsx(\"p\",{className:classes.myp,children:\"Choose a date\"}),/*#__PURE__*/_jsx(\"input\",{className:classes.myinput,type:\"date\",id:\"newDate\",name:\"newDate\",min:\"2020-01-01\",value:enteredDate,onChange:changeDateHandler}),/*#__PURE__*/_jsxs(\"div\",{className:classes.buttondiv,children:[/*#__PURE__*/_jsx(Button,{onClick:noAdding,children:\"Back\"}),changedDate&&/*#__PURE__*/_jsx(Button,{onClick:writeHikeHandler,children:\"Add hike\"}),!changedDate&&/*#__PURE__*/_jsx(Button,{disabled:true,children:\"Add hike\"})]})]})]});};export default MountainDetails;","map":{"version":3,"names":["React","useState","useEffect","Card","Button","Modal","classes","MountainDetails","props","addHike","setAddHike","changedDate","setChangedDate","enteredDate","setEnteredDate","allPeopleOnTheMountain","setAllPeopleOnTheMountain","goBack","onBack","addHikeHandler","noAdding","changeDateHandler","event","target","value","writeHikeHandler","date","toString","reqOptions","method","headers","body","JSON","stringify","id","localStorage","getItem","mountain","fetch","response","ok","console","log","Error","message","getAllHikers","json","peopleOnTheMountainLi","map","item","details","name","altitude","difference","longitude","duration","length","peoplediv","detailsbutton1","detailsbutton2","mymodal","myh1","myp","myinput","buttondiv"],"sources":["C:/mountain_friends_web/frontend/src/components/Home/MountainDetails.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nimport Card from \"../UI/Card/Card\";\r\nimport Button from \"../UI/Button/Button\";\r\nimport Modal from \"../UI/Modal/Modal\";\r\nimport classes from \"./MountainDetails.module.css\";\r\n\r\nconst MountainDetails = (props) => {\r\n  const [addHike, setAddHike] = useState(false);\r\n  const [changedDate, setChangedDate] = useState(false);\r\n  const [enteredDate, setEnteredDate] = useState(\"\");\r\n  const [allPeopleOnTheMountain, setAllPeopleOnTheMountain] = useState([]);\r\n  const goBack = () => {\r\n    props.onBack();\r\n  };\r\n\r\n  const addHikeHandler = () => {\r\n    setAddHike(true);\r\n  };\r\n\r\n  const noAdding = () => {\r\n    setEnteredDate(\"\");\r\n    setChangedDate(false);\r\n    setAddHike(false);\r\n  };\r\n\r\n  const changeDateHandler = (event) => {\r\n    setChangedDate(true);\r\n    setEnteredDate(event.target.value);\r\n  };\r\n\r\n  const writeHikeHandler = async () => {\r\n    const date = enteredDate.toString();\r\n    // console.log(date);\r\n    const reqOptions = {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        id: localStorage.getItem(\"isLoggedIn\"),\r\n        mountain: props.id,\r\n        date: date,\r\n      }),\r\n    };\r\n    try {\r\n      const response = await fetch(\r\n        \"http://sabrinamueller.eu-4.evennode.com/addhike\",\r\n        reqOptions\r\n      );\r\n      if (!response.ok) {\r\n        console.log(response);\r\n        throw new Error(\"Something went wrong\");\r\n      }\r\n      setAddHike(false);\r\n      setChangedDate(false);\r\n      setEnteredDate(\"\");\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getAllHikers = async () => {\r\n      const reqOptions = {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          id: localStorage.getItem(\"isLoggedIn\"),\r\n          mountain: props.id,\r\n        }),\r\n      };\r\n      try {\r\n        const response = await fetch(\r\n          \"http://sabrinamueller.eu-4.evennode.com/getallhikers\",\r\n          reqOptions\r\n        );\r\n        if (!response.ok) {\r\n          console.log(response);\r\n          throw new Error(\"Something went wrong\");\r\n        }\r\n        const body = await response.json();\r\n        console.log(body);\r\n        setAllPeopleOnTheMountain(body);\r\n      } catch (error) {\r\n        console.log(error.message);\r\n      }\r\n    };\r\n    getAllHikers();\r\n  }, [props.id]);\r\n\r\n  const peopleOnTheMountainLi = allPeopleOnTheMountain.map((item) => (\r\n    <li key={item}>{item}</li>\r\n  ));\r\n\r\n  return (\r\n    <Card className={classes.details}>\r\n      <div>\r\n        <h2>Mountain details for {props.name}</h2>\r\n        <p>Altitude: {props.altitude} m</p>\r\n        <p>Height difference: {props.difference} m</p>\r\n        <p>Longitude: {props.longitude} km</p>\r\n        <p>Duration: {props.duration} hours</p>\r\n        {allPeopleOnTheMountain.length > 0 && (\r\n          <div className={classes.peoplediv}>\r\n            <h2>People who have been on this mountain</h2>\r\n            <ul>{peopleOnTheMountainLi}</ul>\r\n          </div>\r\n        )}\r\n        <Button className={classes.detailsbutton1} onClick={goBack}>\r\n          Back\r\n        </Button>\r\n        <Button className={classes.detailsbutton2} onClick={addHikeHandler}>\r\n          Add tour to my list\r\n        </Button>\r\n      </div>\r\n      {addHike && (\r\n        <Modal className={classes.mymodal}>\r\n          <h1 className={classes.myh1}>\r\n            Do want to add {props.name} to your hike list?\r\n          </h1>\r\n          <p className={classes.myp}>Choose a date</p>\r\n          <input\r\n            className={classes.myinput}\r\n            type=\"date\"\r\n            id=\"newDate\"\r\n            name=\"newDate\"\r\n            min=\"2020-01-01\"\r\n            value={enteredDate}\r\n            onChange={changeDateHandler}\r\n          />\r\n          <div className={classes.buttondiv}>\r\n            <Button onClick={noAdding}>Back</Button>\r\n            {changedDate && (\r\n              <Button onClick={writeHikeHandler}>Add hike</Button>\r\n            )}\r\n            {!changedDate && <Button disabled>Add hike</Button>}\r\n          </div>\r\n        </Modal>\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default MountainDetails;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}