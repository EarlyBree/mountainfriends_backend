{"ast":null,"code":"import _regeneratorRuntime from\"C:/mountain_friends_web/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/mountain_friends_web/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/mountain_friends_web/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import FriendCard from\"./FriendCard\";import Card from\"../UI/Card/Card\";import Modal from\"../UI/Modal/Modal\";import Button from\"../UI/Button/Button\";import classes from\"./AllFriendsInfo.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AllFriendsInfo=function AllFriendsInfo(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allFriends=_useState2[0],setAllFriends=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),friendAdded=_useState4[0],setFriendAdded=_useState4[1];useEffect(function(){var fetchAllFriends=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var reqOptions,response,body;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:reqOptions={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:localStorage.getItem(\"isLoggedIn\")})};_context.prev=1;_context.next=4;return fetch(\"http://sabrinamueller.eu-4.evennode.com/getallusers\",reqOptions);case 4:response=_context.sent;if(response.ok){_context.next=7;break;}throw new Error(\"Something went wrong\");case 7:_context.next=9;return response.json();case 9:body=_context.sent;setAllFriends(body);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);console.log(_context.t0.message);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function fetchAllFriends(){return _ref.apply(this,arguments);};}();fetchAllFriends();},[friendAdded]);var addFriend=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(friendsId){var reqOptions,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:reqOptions={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:localStorage.getItem(\"isLoggedIn\"),friendsId:friendsId})};_context2.prev=1;_context2.next=4;return fetch(\"http://sabrinamueller.eu-4.evennode.com/addafriend\",reqOptions);case 4:response=_context2.sent;if(response.ok){_context2.next=8;break;}console.log(response);throw new Error(\"Something went wrong\");case 8:// const body = await response.json();\n// setAllFriends(body);\nsetFriendAdded(true);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0.message);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function addFriend(_x){return _ref2.apply(this,arguments);};}();var confirmFriendAddedHandler=function confirmFriendAddedHandler(){setFriendAdded(false);};var allFriendsCard=allFriends.map(function(friend){return/*#__PURE__*/_jsx(FriendCard,{id:friend.id,name:friend.name,email:friend.email,birthday:friend.birthday,city:friend.city,button:\"Add friend\",isFriend:friend.isFriend,addFriend:addFriend},friend.id);});return/*#__PURE__*/_jsxs(Card,{className:classes.friendsinfo,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All people\"}),/*#__PURE__*/_jsx(\"ul\",{className:classes.friendlist,children:allFriendsCard}),friendAdded&&/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.modal,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Friend added!\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:confirmFriendAddedHandler,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",className:classes.modalBtn,children:\"Okay\"})})]})})]});};export default AllFriendsInfo;","map":{"version":3,"names":["React","useState","useEffect","FriendCard","Card","Modal","Button","classes","AllFriendsInfo","allFriends","setAllFriends","friendAdded","setFriendAdded","fetchAllFriends","reqOptions","method","headers","body","JSON","stringify","id","localStorage","getItem","fetch","response","ok","Error","json","console","log","message","addFriend","friendsId","confirmFriendAddedHandler","allFriendsCard","map","friend","name","email","birthday","city","isFriend","friendsinfo","friendlist","modal","modalBtn"],"sources":["C:/mountain_friends_web/frontend/src/components/Home/AllFriendsInfo.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nimport FriendCard from \"./FriendCard\";\r\nimport Card from \"../UI/Card/Card\";\r\nimport Modal from \"../UI/Modal/Modal\";\r\nimport Button from \"../UI/Button/Button\";\r\nimport classes from \"./AllFriendsInfo.module.css\";\r\n\r\nconst AllFriendsInfo = () => {\r\n  const [allFriends, setAllFriends] = useState([]);\r\n  const [friendAdded, setFriendAdded] = useState(false);\r\n  useEffect(() => {\r\n    const fetchAllFriends = async () => {\r\n      const reqOptions = {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          id: localStorage.getItem(\"isLoggedIn\"),\r\n        }),\r\n      };\r\n      try {\r\n        const response = await fetch(\r\n          \"http://sabrinamueller.eu-4.evennode.com/getallusers\",\r\n          reqOptions\r\n        );\r\n        if (!response.ok) {\r\n          throw new Error(\"Something went wrong\");\r\n        }\r\n        const body = await response.json();\r\n        setAllFriends(body);\r\n      } catch (error) {\r\n        console.log(error.message);\r\n      }\r\n    };\r\n    fetchAllFriends();\r\n  }, [friendAdded]);\r\n\r\n  const addFriend = async (friendsId) => {\r\n    const reqOptions = {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        id: localStorage.getItem(\"isLoggedIn\"),\r\n        friendsId: friendsId,\r\n      }),\r\n    };\r\n    try {\r\n      const response = await fetch(\r\n        \"http://sabrinamueller.eu-4.evennode.com/addafriend\",\r\n        reqOptions\r\n      );\r\n      if (!response.ok) {\r\n        console.log(response);\r\n        throw new Error(\"Something went wrong\");\r\n      }\r\n      // const body = await response.json();\r\n      // setAllFriends(body);\r\n      setFriendAdded(true);\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  };\r\n\r\n  const confirmFriendAddedHandler = () => {\r\n    setFriendAdded(false);\r\n  };\r\n\r\n  const allFriendsCard = allFriends.map((friend) => (\r\n    <FriendCard\r\n      key={friend.id}\r\n      id={friend.id}\r\n      name={friend.name}\r\n      email={friend.email}\r\n      birthday={friend.birthday}\r\n      city={friend.city}\r\n      button={\"Add friend\"}\r\n      isFriend={friend.isFriend}\r\n      addFriend={addFriend}\r\n    />\r\n  ));\r\n  return (\r\n    <Card className={classes.friendsinfo}>\r\n      <h1>All people</h1>\r\n      <ul className={classes.friendlist}>{allFriendsCard}</ul>\r\n      {friendAdded && (\r\n        <Modal>\r\n          <div className={classes.modal}>\r\n            <h1>Friend added!</h1>\r\n            <form onSubmit={confirmFriendAddedHandler}>\r\n              <Button type=\"submit\" className={classes.modalBtn}>\r\n                Okay\r\n              </Button>\r\n            </form>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default AllFriendsInfo;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}